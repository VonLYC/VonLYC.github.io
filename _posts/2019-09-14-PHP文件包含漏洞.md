---
layout:     post                    # 使用的布局（不需要改）
title:      php文件包含漏洞               # 标题 
subtitle:    #副标题
date:       2019-09-13              # 时间
author:     Von                      # 作者
header-img: img/post-bg-kuaidi.jpg    #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - Web
    - php

---

# 简介
在通过php的函数引入文件时，由于对传入的文件名没有进行有效的验证，进而导致了漏洞的产生。  
常见的文件包含函数有以下几个
``` php
include()   \\执行到include时才包含文件，找不到被包含文件时只会产生警告，脚本将继续执行
require()  \\只要程序一运行就包含文件，找不到被包含文件时会产生致命错误，并停止脚本执行
include_once()  \\若文件中代码已被包含，则不会再次被包含
require_once()  \\若文件中代码已被包含，则不会再次被包含
```
当利用这四个函数来包含文件时，不管文件是什么类型（图片、txt等等），都会直接作为php文件进行解析。测试代码：
``` php
<?php
	$file = $_GET['file'];
	include $file;
?>
```
在同目录下有个1.txt，其内容为<? phpinfo(); ?>。则只需要访问：  
233.php?file=1.txt,即可访问到phpinfo界面。
![](/img/blog13-1.png)
而如果包含非PHP语法规范源文件时，将会暴露其源代码。
![](/img/blog13-2.png)
从上面这个例子我们可以看出,PHP文件包含漏洞的产生原因是在通过PHP的函数引入文件时，由于传入的文件名没有经过合理的校验，从而操作了预想之外的文件，就可能导致意外的文件泄露甚至恶意的代码注入。

# 漏洞分类
## 本地文件包含(LFI)






